<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>asyncSample</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <h1>Post Data</h1>
      <table class="table" id="tblData">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Title</th>
            <th scope="col">Body</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody id="tbodyData"></tbody>
      </table>

      <input type="text" name="username" id="username" />
      <input type="password" name="password" id="password" />
      <button type="submit" onclick="submitButton(event)">Submit</button>
    </div>
    <!-- Bootstrap JavaScript Libraries -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript">
      // <tr>
      //             <th scope="row">1</th>
      //             <td>ID</td>
      //             <td>TITLE</td>
      //             <td>BODY</td>
      //           </tr>
      //           <tr>
      //             <th scope="row">2</th>
      //             <td>Jacob</td>
      //             <td>Thornton</td>
      //             <td>@fat</td>
      //           </tr>
      //           <tr>
      //             <th scope="row">3</th>
      //             <td>Larry</td>
      //             <td>the Bird</td>
      //             <td>@twitter</td>
      //           </tr>
      function fetchData(obj) {
          // fetch('https://jsonplaceholder.typicode.com/posts')
          //  .then((response) => response.json())
          //   .then((r) => r)
          //   .catch((error) => console.log('error', error));

        fetch('https://jsonplaceholder.typicode.com/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', Authorization: 'generatedToken' },
          body: JSON.stringify(obj),
        })
          .then((response) => response.json())
          .catch((error) => console.log('error', error));
      }

      function submitButton(event) {
        let u = document.getElementById('username');
        let username = u.value;
        let p = document.getElementById('password');
        let password = p.value;

        if (username === '') {
          alert('Please enter a username');
          event.preventDefault();
          return false;
        }

        if (password === '') {
          alert('Please enter a password');
          event.preventDefault();
          return false;
        } else if (password.length > 8) {
          alert('Password must be 8 digits!');
          event.preventDefault();
          return false;
        }
        let obj = { username, password };
        fetchData(obj);
      }

      async function asyncGetData() {
        try {
          const apiCall = await fetch('https://jsonplaceholder.typicode.com/posts');
          const data = await apiCall.json();

          for (let i = 0; i < data.length; i++) {
            let trE = document.createElement('tr');

            let td1 = document.createElement('td');
            let td2 = document.createElement('td');
            let td3 = document.createElement('td');
            let td4 = document.createElement('td');
            let btn = document.createElement('button');
            let btnE = document.createElement('button');
            btn.classList.add('btn');
            btn.classList.add('btn-danger');
            btn.textContent = 'Remove';

            btnE.classList.add('btn');
            btnE.classList.add('btn-primary');
            btnE.style.marginRight = '10px';
            btnE.textContent = 'Edit';

            td1.textContent = data[i].id;
            td2.textContent = data[i].title;
            td3.textContent = data[i].body;
            td4.appendChild(btnE);
            td4.appendChild(btn);
            trE.appendChild(td1);
            trE.appendChild(td2);
            trE.appendChild(td3);
            trE.appendChild(td4);
            document.getElementById('tbodyData').appendChild(trE);
          }
          localStorage.setItem('tbodyData');
        } catch (error) {
          console.log('error', error);
        }
      }
      fetchData();
    </script>
  </body>
</html>